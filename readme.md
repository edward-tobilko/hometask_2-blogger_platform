1. –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–¥–µ—è:

–ó–∞–ø–∏—Ç –≤—ñ–¥ –∫–ª—ñ—î–Ω—Ç–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —Ç–∞–∫–∏–π —à–ª—è—Ö:

HTTP -> routes (request-payload + validation + http-handlers) -> application (services/handlers + commands/queries) -> repositories -> db -> –Ω–∞–∑–∞–¥ —á–µ—Ä–µ–∑ mappers + output types -> response.

–ü–ª—é—Å –∑–≤–µ—Ä—Ö—É —î —Å–ø—ñ–ª—å–Ω–µ —è–¥—Ä–æ core, –¥–µ –ª–µ–∂–∞—Ç—å –ø–æ–º–∏–ª–∫–∏, –∑–∞–≥–∞–ª—å–Ω—ñ —Ç–∏–ø–∏, utils, swagger, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î —Ç–æ—â–æ.

2. –ü–∞–ø–∫–∞ core:

2.1 core/errors/types:

validation-error.type.ts, validation-error.type-output.ts ‚Äì —Ç–∏–ø–∏, —è–∫—ñ –æ–ø–∏—Å—É—é—Ç—å, —è–∫ –≤–∏–≥–ª—è–¥–∞—î –ø–æ–º–∏–ª–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–¥—É —ñ —É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ API.

2.2 core/errors:

application.error.ts ‚Äì –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å –¥–ª—è –±—ñ–∑–Ω–µ—Å-–ø–æ–º–∏–ª–æ–∫ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, NotFound, Forbidden —ñ —Ç.–¥.).
create-error-messages.error.ts ‚Äì —Ö–µ–ª–ø–µ—Ä–∏, —è–∫—ñ –±—É–¥—É—é—Ç—å —Ç–µ–∫—Å—Ç –ø–æ–º–∏–ª–∫–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, ‚ÄúDriver is not found‚Äù).
errors.handler.ts ‚Äì –≥–ª–æ–±–∞–ª—å–Ω–∏–π error-handler –¥–ª—è Express: –ª–æ–≤–∏—Ç—å —É—Å—ñ –ø–æ–º–∏–ª–∫–∏ —ñ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î —ó—Ö —É –Ω–æ—Ä–º–∞–ª—å–Ω–∏–π JSON-response.
repository-not-found.error.ts ‚Äì –ø–æ–º–∏–ª–∫–∞, –∫–æ–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π/—Ä–µ—Å—É—Ä—Å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∏–π.

2.3 core/helpers:

create-command.helper.ts ‚Äì –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å/—Ö–µ–ª–ø–µ—Ä –¥–ª—è command –æ–±‚Äô—î–∫—Ç—ñ–≤ (CQRS —Å—Ç–∏–ª—å: –∫–æ–º–∞–Ω–¥–∞ –Ω–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ—â–æ).
set-default-sort-and-pagin... ‚Äì –≤–∏—Å—Ç–∞–≤–ª—è—î –¥–µ—Ñ–æ–ª—Ç–Ω—É –ø–∞–≥—ñ–Ω–∞—Ü—ñ—é/—Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è (page, pageSize, sortBy, sortDirection), —è–∫—â–æ –∫–ª—ñ—î–Ω—Ç —ó—Ö –Ω–µ –ø–µ—Ä–µ–¥–∞–≤.

2.4 core/infrastructure/crypto:

password-hasher.ts ‚Äì –æ–±–≥–æ—Ä—Ç–∫–∞ –Ω–∞–¥, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, bcrypt. –í –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ –æ–ø–∏—Å–∞–Ω–æ: —è–∫ —Ö–µ—à—É–≤–∞—Ç–∏ –ø–∞—Ä–æ–ª—å, –ø–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ –ø–∞—Ä–æ–ª—å –∑ —Ö–µ—à–µ–º.

2.5 core/middlewares/validation:

Express-middleware, —è–∫—ñ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å –≤—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ –¥–æ —Ç–æ–≥–æ, —è–∫ –≤–æ–Ω–∏ –ø–æ—Ç—Ä–∞–ø–ª—è—Ç—å —É handler:

input-validation-result.middleware.ts ‚Äì –∑–±–∏—Ä–∞—î –ø–æ–º–∏–ª–∫–∏ –∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —ñ –≤—ñ–¥–¥–∞—î 400 –∑ –∫—Ä–∞—Å–∏–≤–∏–º JSON-–æ–º.

params-id-validation.middleware.ts ‚Äì –ø–µ—Ä–µ–≤—ñ—Ä—è—î :id (—á–∏ —Ü–µ –≤–∞–ª—ñ–¥–Ω–∏–π ObjectId —ñ —Ç.–¥.).

query-pagination-sorting-... ‚Äì –ø–µ—Ä–µ–≤—ñ—Ä—è—î query-–ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó/—Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è.

resource-enum-validation... ‚Äì –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —â–æ resource –∑ resources-enum –≤–∞–ª—ñ–¥–Ω–∏–π.

core/paths

paths.ts ‚Äì —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ –º—ñ—Å—Ü–µ –∑ —É—Å—ñ–º–∞ URL-—à–ª—è—Ö–∞–º–∏ (/drivers, /rides —ñ —Ç.–ø.), —â–æ–± –Ω–µ —Ä–æ–∑–∫–∏–¥–∞—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –ø–æ –≤—Å—å–æ–º—É –ø—Ä–æ–µ–∫—Ç—É.

core/result

types/

application-result-body-type..., application-result-status-... ‚Äì —Ç–∏–ø–∏, —è–∫—ñ –æ–ø–∏—Å—É—é—Ç—å:

—Å—Ç–∞—Ç—É—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ—ó (success, not_found, bad_request —Ç–æ—â–æ),

—Ç—ñ–ª–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É.

application-result.ts ‚Äì —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –∫–ª–∞—Å/–æ–±–≥–æ—Ä—Ç–∫–∞ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —Å–µ—Ä–≤—ñ—Å—ñ–≤:

success(data),

notFound(message),

error(message) —Ç–æ—â–æ.

create-error-application-re... ‚Äì —Ö–µ–ª–ø–µ—Ä, —â–æ–± –ª–µ–≥–∫–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ ApplicationResult –∑ –ø–æ–º–∏–ª–∫–æ—é.

–¢–æ–±—Ç–æ —É—Å—ñ —Å–µ—Ä–≤—ñ—Å–Ω—ñ/–∞–ø–ª—ñ–∫–µ–π—à–Ω-—à–∞—Ä–∏ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å –Ω–µ ‚Äú–≥–æ–ª—ñ‚Äù –¥–∞–Ω—ñ, –∞ ApplicationResult. –ü–æ—Ç—ñ–º http-handler –¥–∏–≤–∏—Ç—å—Å—è –Ω–∞ —Ü–µ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —ñ –≤–∏—Ä—ñ—à—É—î, —è–∫–∏–π —Å—Ç–∞—Ç—É—Å –∫–æ–¥—É –≤—ñ–¥–¥–∞—Ç–∏.

core/settings-mongoDB

settings-mongo.db.ts ‚Äì –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Mongo: URI, —ñ–º‚Äô—è –±–∞–∑–∏, –æ–ø—Ü—ñ—ó.

core/swagger

setup-swagger.ts ‚Äì —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Swagger UI + –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è \*.swagger.yml —Ñ–∞–π–ª—ñ–≤.

core/types

fields-only-type.ts ‚Äì —É—Ç–∏–ª—ñ—Ç–∞ —Ç–∏–ø—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∑—è—Ç–∏ —Ç—ñ–ª—å–∫–∏ –ø–µ–≤–Ω—ñ –ø–æ–ª—è –∑ —Ç–∏–ø—É).

paginated-type.output.ts ‚Äì —Ç–∏–ø –¥–ª—è –ø–∞–≥—ñ–Ω–æ–≤–∞–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ (items, total, page, pageSize).

pagination-and-sorting-type... ‚Äì —Å–ø—ñ–ª—å–Ω–∏–π —Ç–∏–ø –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó —Ç–∞ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è.

resources-enum.ts ‚Äì enum —Ä–µ—Å—É—Ä—Å—ñ–≤ (drivers, rides, —ñ —Ç.–¥.).

with-meta-type.ts ‚Äì —Ç–∏–ø, —è–∫–∏–π –¥–æ–¥–∞—î meta –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.

–¶–µ –∑–∞–≥–∞–ª—å–Ω—ñ generics/—Ç–∏–ø–∏, —è–∫—ñ –º–æ–∂–Ω–∞ —é–∑–∞—Ç–∏ –≤ —Ä—ñ–∑–Ω–∏—Ö –º–æ–¥—É–ª—è—Ö.

core/utils

http-statuses.ts ‚Äì enum/–æ–±‚Äô—î–∫—Ç –∑ HTTP —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–∞–º–∏ (200, 201, 400, 404, 500‚Ä¶), —â–æ–± –Ω–µ –ø–∏—Å–∞—Ç–∏ ‚Äú–º–∞–≥—ñ—á–Ω—ñ —á–∏—Å–ª–∞‚Äù.

core/db

mongo.db.ts ‚Äì —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ Mongo:

runDB() ‚Äì –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—å,

stopDB() ‚Äì –≤—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—å,

clearDB() ‚Äì –æ—á–∏—Å—Ç–∏—Ç–∏ (—á–∞—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ —Ç–µ—Å—Ç–∞—Ö).

3. –ú–æ–¥—É–ª—å drivers

–¢—É—Ç —É–∂–µ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π –º–æ–¥—É–ª—å (bounded context) ‚Äì –≤—Å–µ –ø—Ä–æ –≤–æ–¥—ñ—ó–≤.

drivers/domain

driver.domain.ts ‚Äì –¥–æ–º–µ–Ω–Ω–æ-–º–æ–¥–µ–ª—å –¥—Ä–∞–π–≤–µ—Ä–∞ (entity): —è–∫—ñ –ø–æ–ª—è —î, —è–∫—ñ —ñ–Ω–≤–∞—Ä—ñ–∞–Ω—Ç–∏, –º–æ–∂–ª–∏–≤–æ –º–µ—Ç–æ–¥–∏ —Ç–∏–ø—É updateName, deactivate, —Ç–æ—â–æ.

driver-dto.domain.ts ‚Äì DTO, –∑ —è–∫–∏–º –ø—Ä–∞—Ü—é—î –¥–æ–º–µ–Ω:

–Ω–∞–ø—Ä. CreateDriverDomainDto, UpdateDriverDomainDto.

–î–æ–º–µ–π–Ω –Ω–µ –∑–Ω–∞—î –ø—Ä–æ HTTP, Mongo, Express ‚Äì —Ç—ñ–ª—å–∫–∏ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞.

drivers/repositories

–¶–µ —Ä—ñ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–∞–Ω–∏—Ö:

drivers.repository.ts ‚Äì –æ—Å–Ω–æ–≤–Ω–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:

create(driverDto),

findById(id),

update(...),

delete(...).
–ü—Ä–∞—Ü—é—î –Ω–∞–ø—Ä—è–º—É –∑ Mongo-–∫–æ–ª–µ–∫—Ü—ñ—î—é.

driver-query.repository.ts ‚Äì –æ–∫—Ä–µ–º–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è (CQRS):

–º–µ—Ç–æ–¥–∏ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—ñ–≤ –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏, –ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é,

join –∑ —ñ–Ω—à–∏–º–∏ –∫–æ–ª–µ–∫—Ü—ñ—è–º–∏, –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó, –ø–æ—à—É–∫.

–¢–æ–±—Ç–æ:

Service / handler –∫–∞–∂–µ: ‚Äú–º–µ–Ω—ñ –ø–æ—Ç—Ä—ñ–±–µ–Ω —Å–ø–∏—Å–æ–∫ –¥—Ä–∞–π–≤–µ—Ä—ñ–≤ –∑ —Ç–∞–∫–∏–º–∏ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏‚Äù ‚Üí query-repository –π–¥–µ –≤ –ë–î, –¥—ñ—Å—Ç–∞—î –¥–∞–Ω—ñ.

drivers/application

–¶–µ –∞–ø–ª—ñ–∫–µ–π—à–Ω-—à–∞—Ä ‚Äì —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è use-cases.

commands/

driver-dto-type.command... ‚Äì DTO –¥–ª—è –∫–æ–º–∞–Ω–¥:

—â–æ —Ç—Ä–µ–±–∞, —â–æ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏ –¥—Ä–∞–π–≤–µ—Ä–∞ (name, phone, car‚Ä¶),

—â–æ —Ç—Ä–µ–±–∞, —â–æ–± –æ–Ω–æ–≤–∏—Ç–∏ –¥—Ä–∞–π–≤–µ—Ä–∞.

–°–∞–º–µ –∫–æ–º–∞–Ω–¥–Ω—ñ DTO –æ–ø–∏—Å—É—é—Ç—å –≤—Ö—ñ–¥ –¥–ª—è use-case-—ñ–≤ ‚Äúcreate / update / delete‚Äù.

mappers/

map-to-driver-output.map... ‚Äì –º–∞–ø–ø–µ—Ä –¥–æ–º–µ–Ω ‚Üí output type (—â–æ –≤—ñ–¥–¥–∞—î–º–æ –∫–ª—ñ—î–Ω—Ç—É).

map-to-driver-list-paginat... ‚Äì –º–∞–ø–ø–µ—Ä —Å–ø–∏—Å–∫—É –¥—Ä–∞–π–≤–µ—Ä—ñ–≤ + –ø–∞–≥—ñ–Ω–∞—Ü—ñ–π–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó ‚Üí —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ API.

output/

driver-type.output.ts ‚Äì —è–∫ –≤–∏–≥–ª—è–¥–∞—î –æ–¥–∏–Ω driver —É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.

driver-data-type.output.ts ‚Äì –º–æ–∂–ª–∏–≤–æ —Ç–µ —Å–∞–º–µ, –∞–ª–µ –∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º–∏ –ø–æ–ª—è–º–∏.

driver-list-paginated-type... ‚Äì —Ç–∏–ø –¥–ª—è –ø–∞–≥—ñ–Ω–æ–≤–∞–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É –¥—Ä–∞–π–≤–µ—Ä—ñ–≤, —è–∫–∏–π –≤–µ—Ä—Ç–∞—î API.

query-handlers/

get-driver-list-type.query.ts ‚Äì handler, —è–∫–∏–π —Ä–µ–∞–ª—ñ–∑—É—î use-case:

‚Äú–æ—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –¥—Ä–∞–π–≤–µ—Ä—ñ–≤‚Äù;

–ø—Ä–∏–π–º–∞—î DTO –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏/–ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é;

–≤–∏–∫–ª–∏–∫–∞—î driver-query.repository;

–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –º–∞–ø–ø–µ—Ä–∏ —ñ –ø–æ–≤–µ—Ä—Ç–∞—î ApplicationResult –∑ driver-list-paginated-type.

driver-query.service.ts ‚Äì —Å–µ—Ä–≤—ñ—Å –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è (–≤—Å—ñ ‚Äúget‚Äù).

drivers.service.ts ‚Äì —Å–µ—Ä–≤—ñ—Å –¥–ª—è –∑–∞–ø–∏—Å—É:

create/update/delete –¥—Ä–∞–π–≤–µ—Ä–∞;

–≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –≤–∏–∫–ª–∏–∫–∞—î domain (—Å—Ç–≤–æ—Ä–∏—Ç–∏ entity), —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó, –º–∞–ø–ø–µ—Ä–∏;

–∑–∞–≤–µ—Ä—Ç–∞—î –≤—Å–µ –≤ ApplicationResult.

–¢–æ–±—Ç–æ application = —Å—Ü–µ–Ω–∞—Ä—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è (‚Äú—Å—Ç–≤–æ—Ä–∏ –≤–æ–¥—ñ—è‚Äù, ‚Äú–æ–Ω–æ–≤–∏‚Äù, ‚Äú–¥–∞–π —Å–ø–∏—Å–æ–∫‚Äù).

drivers/routes

–¶–µ HTTP-—à–∞—Ä ‚Äì —Ç—É—Ç —É–∂–µ Express.

http-handlers/

create-driver.handler.ts ‚Äì Express-handler –¥–ª—è POST /drivers.

get-driver-list.handler.ts ‚Äì –¥–ª—è GET /drivers.

get-driver.handler.ts ‚Äì –¥–ª—è GET /drivers/:id.

update-driver.handler.ts ‚Äì –¥–ª—è PUT/PATCH /drivers/:id.

delete-driver.handler.ts ‚Äì –¥–ª—è DELETE /drivers/:id.

get-driver-rides-list.handl... ‚Äì GET /drivers/:id/rides —ñ —Ç.–ø.

–ö–æ–∂–µ–Ω handler:

–ó–∞–±–∏—Ä–∞—î –¥–∞–Ω—ñ –∑ req (body, params, query).

–ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î —ó—Ö —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π command/query DTO.

–í–∏–∫–ª–∏–∫–∞—î application service / handler.

–ë–µ—Ä–µ—Ç—å—Å—è ApplicationResult —ñ –Ω–∞ –π–æ–≥–æ –æ—Å–Ω–æ–≤—ñ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è HTTP-response.

request-payloads/

–¶–µ —Ç–µ, —â–æ —Ç–µ–±–µ, —Å—Ö–æ–∂–µ, –Ω–∞–π–±—ñ–ª—å—à–µ –±–µ–Ω—Ç–µ–∂–∏—Ç—å üôÇ

create-driver-request.payload.ts ‚Äì —Ç–∏–ø, —è–∫–∏–π –æ–ø–∏—Å—É—î —Ç—ñ–ª–æ –∑–∞–ø–∏—Ç—É –¥–ª—è POST /drivers:

name, phone, carModel —Ç–æ—â–æ ‚Äì —Å–∞–º–µ –≤ —Ç–æ–º—É –≤–∏–≥–ª—è–¥—ñ, —è–∫ –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∑ –∫–ª—ñ—î–Ω—Ç–∞.

update-driver-request.payload.ts ‚Äì payload –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥—Ä–∞–π–≤–µ—Ä–∞.

driver-list-request.payload.ts ‚Äì payload (query) –¥–ª—è —Å–ø–∏—Å–∫—É –¥—Ä–∞–π–≤–µ—Ä—ñ–≤: page, pageSize, sortBy, search‚Ä¶

driver-errors-request.payl... ‚Äì —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–º–∏–ª–æ–∫ –¥–ª—è driver-–∑–∞–ø–∏—Ç—ñ–≤.

driver-sort-field-enum.ts ‚Äì enum, —è–∫—ñ –ø–æ–ª—è –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è (name, createdAt —ñ —Ç.–¥.).

Payload ‚â† DTO.
RequestPayload ‚Äì —Ü–µ HTTP-—Ä—ñ–≤–µ–Ω—å (—è–∫ –≤–∏–≥–ª—è–¥–∞—é—Ç—å –¥–∞–Ω—ñ –≤ –∑–∞–ø–∏—Ç—ñ).
Command / Query DTO ‚Äì —Ü–µ –≤–∂–µ —á–∏—Å—Ç–∏–π application-—Ä—ñ–≤–µ–Ω—å (—Ç–∞–º –º–æ–∂—É—Ç—å –±—É—Ç–∏ —ñ–Ω—à—ñ –Ω–∞–∑–≤–∏, –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω—ñ —Ç–∏–ø–∏ —Ç–æ—â–æ).

validation/

driver-request-payload.val... ‚Äì —Å—Ö–µ–º–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, zod/class-validator) –¥–ª—è create/update/list payload‚Äô—ñ–≤.

–¢—É—Ç –æ–ø–∏—Å–∞–Ω–æ, —è–∫—ñ –ø–æ–ª—è –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤—ñ, —è–∫—ñ —Ç–∏–ø–∏, –º—ñ–Ω/–º–∞–∫—Å –¥–æ–≤–∂–∏–Ω–∞ —ñ —Ç.–¥.

drivers.route.ts

–¢—É—Ç —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è Router, –ø—ñ–¥–∫–ª—é—á–∞—é—Ç—å—Å—è –≤—Å—ñ http-handlers —ñ middlewares:

router.post('/', validateCreateDriver, createDriverHandler), —ñ —Ç.–ø.

drivers/docs

drivers.swagger.yml ‚Äì swagger-–æ–ø–∏—Å –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤, —è–∫–∏–π –ø–æ—Ç—ñ–º –ø—ñ–¥—Ç—è–≥—É—î core/swagger/setup-swagger.ts.

4. rides / testing / —ñ–Ω—à–µ

rides ‚Äì —Å–∫–æ—Ä—ñ—à –∑–∞ –≤—Å–µ —Ç–∞–∫–∏–π —Å–∞–º–∏–π –º–æ–¥—É–ª—å, —è–∫ drivers, —Ç—ñ–ª—å–∫–∏ –¥–ª—è –ø–æ—ó–∑–¥–æ–∫. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±—É–¥–µ –∞–Ω–∞–ª–æ–≥—ñ—á–Ω–∞:

domain, repositories, application, routes, docs.

testing/docs, testing/routes ‚Äì –≤—Å–µ, —â–æ —Å—Ç–æ—Å—É—î—Ç—å—Å—è —Ç–µ—Å—Ç—ñ–≤ (swagger-–¥–æ–∫–∏ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è, –æ–∫—Ä–µ–º—ñ route‚Äô–∏ –ø—ñ–¥ —Ç–µ—Å—Ç–æ–≤–µ –æ—Ç–æ—á–µ–Ω–Ω—è, e2e-—Ç–µ—Å—Ç–∏ —Ç–æ—â–æ).

app.ts ‚Äì —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Express-–¥–æ–¥–∞—Ç–∫—É: –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è middleware, routes, swagger.

server.ts ‚Äì –∑–∞–ø—É—Å–∫ HTTP-—Å–µ—Ä–≤–µ—Ä–∞ (app.listen(...)).

5. –Ø–∫ —É—Å–µ –ø—Ä–∞—Ü—é—î –Ω–∞ –ø—Ä–∏–∫–ª–∞–¥—ñ –æ–¥–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É

–ó–∞–ø–∏—Ç: POST /drivers (—Å—Ç–≤–æ—Ä–∏—Ç–∏ –≤–æ–¥—ñ—è)

–ó–∞–ø–∏—Ç –ø—Ä–∏–ª—ñ—Ç–∞—î —É drivers.route.ts ‚Üí –º–∞—Ä—à—Ä—É—Ç POST /drivers.

–ô–¥—É—Ç—å middleware:

–≤–∞–ª—ñ–¥–∞—Ü—ñ—è create-driver-request.payload ‚Üí –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ 400.

–Ø–∫—â–æ –æ–∫:

create-driver.handler.ts –æ—Ç—Ä–∏–º—É—î req.body, –ø—Ä–∏–≤–æ–¥–∏—Ç—å –¥–æ —Ç–∏–ø—É CreateDriverRequestPayload.

Handler —Å—Ç–≤–æ—Ä—é—î Command DTO —ñ –≤–∏–∫–ª–∏–∫–∞—î drivers.service.createDriver(commandDto).

drivers.service:

—Å—Ç–≤–æ—Ä—é—î domain-entity Driver,

–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î drivers.repository –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ Mongo,

—á–µ—Ä–µ–∑ mapper –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –Ω–∞ DriverOutputType,

–ø–æ–≤–µ—Ä—Ç–∞—î ApplicationResult.success(data).

Handler –¥–∏–≤–∏—Ç—å—Å—è –Ω–∞ ApplicationResult, –¥—ñ—Å—Ç–∞—î statusCode —Ç–∞ body, —ñ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –∫–ª—ñ—î–Ω—Ç—É JSON-response.

–Ø–∫—â–æ —Ö–æ—á–µ—à, –Ω–∞—Å—Ç—É–ø–Ω–∏–º –∫—Ä–æ–∫–æ–º –º–æ–∂—É:

–≤–∑—è—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Ñ–∞–π–ª, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ create-driver-request.payload.ts –∞–±–æ drivers.service.ts,

–ø—Ä—è–º–æ –Ω–∞ –∫–æ–¥—ñ –ø–æ–∫–∞–∑–∞—Ç–∏, —â–æ –∫—É–¥–∏ –π–¥–µ —ñ —è–∫ —Ü–µ –∑–≤‚Äô—è–∑–∞–Ω–æ –∑ —ñ–Ω—à–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏.
